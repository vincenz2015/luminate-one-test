{"version":3,"sources":["webpack:///./frontend/scheduler/schedule.js","webpack:///./frontend/util/range.js","webpack:///./frontend/scheduler/ProjectSchedule.vue?5f45","webpack:///./frontend/scheduler/ProjectScheduleCell.js","webpack:///frontend/scheduler/ProjectSchedule.vue","webpack:///./frontend/scheduler/ProjectSchedule.vue?f6e7","webpack:///./frontend/scheduler/ProjectSchedule.vue","webpack:///./frontend/auth/Logout.vue?49b0","webpack:///./frontend/auth/Logout.vue?1956","webpack:///frontend/auth/Logout.vue","webpack:///./frontend/auth/Logout.vue","webpack:///./frontend/scheduler/Timeline.js","webpack:///./plumbing/component.js","webpack:///./frontend/scheduler/TimeFilter.vue?669e","webpack:///./frontend/scheduler/TimeFilter.vue?1138","webpack:///frontend/scheduler/TimeFilter.vue","webpack:///./frontend/scheduler/TimeFilter.vue"],"names":["dayOffsetEpoch","spacetime","component","name","render","h","state","props","hub","scopedSlots","route","isdown","daysCount","limit","current","currenttime","visibleOffset","diff","calculateParams","e","offsetX","offsetY","day_offset","Math","min","max","floor","item_index","itemcount","day_index","day_indicies","range","class","editable","attrs","width","height","on","mousedown","target","currentTarget","button","params","emit","mousemove","buttons","mouseup","mouseleave","map","y","x","gap","cellSize","icon_x","icon_y","day_x","day_y","flat","lo","hi","res","i","push","noteOverlayPoints","resource","resources","availabilityByResource","availability","key","id","a","pathie","get","change","changes","project","projects","archived","rx","ry","project_id","note","points","projectsById","icon","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","scheduled","remaining","projectHref","schedule","_m","_l","r","backward","today","forward","_b","timelineprops","_u","fn","scheduleprops","logout","abbr","days","subtract","every","add","months","filter","d","index","date","format","day","query","Vue","extend","functional","ctx","hyperscript","parent","$store","$route","router","$router","data","$hub","directives","rawName","value","expression","domProps","$event","composing"],"mappings":"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","file":"5.js","sourcesContent":["import component from '../../plumbing/component'\r\nimport spacetime from 'spacetime'\r\nimport range from '../util/range'\r\nimport 'array-flat-polyfill'\r\n\r\nconst timezone = 'Pacific/Auckland'\r\n\r\n// gap around each cell\r\nconst gap = 3\r\n// width and height of each cell\r\nconst cellSize = 27\r\n// days are stored as an index offset from 2019-01-01\r\n// e.g. 0 is 2019-01-01\r\nconst dayOffsetEpoch = spacetime('2019-01-01', timezone)\r\n\r\nexport default component({\r\n    name: \"Schedule\",\r\n    render: (h, {state, props, hub, route, scopedSlots}) => {\r\n        const isdown = props.isdown !== null ? props.isdown : true\r\n        const daysCount = props.limit\r\n\r\n        const current = props.currenttime\r\n        const visibleOffset = dayOffsetEpoch.diff(current, 'days')\r\n        // given pixel coordinates map to item day coordinates\r\n        const calculateGrid = (offsetX, offsetY) => ({\r\n            day_offset:\r\n                Math.min(daysCount - 1,\r\n                    Math.max(0,\r\n                        Math.floor(offsetX / cellSize))),\r\n            item_index:\r\n                Math.min(props.itemcount - 1,\r\n                    Math.max(0,\r\n                        Math.floor((offsetY) / cellSize)))\r\n        })\r\n\r\n        const calculateParams = (e) => {\r\n            const { day_offset, item_index } = calculateGrid(e.offsetX, e.offsetY)\r\n            const day_index = day_offset + visibleOffset\r\n            const day_indicies = props.item_index == item_index\r\n                && props.day_index != day_index\r\n                ? range(props.day_index, day_index)\r\n                : [day_index]\r\n            return {\r\n                day_offset,\r\n                day_index,\r\n                item_index,\r\n                day_indicies\r\n            }\r\n        }\r\n\r\n        return h('svg.schedule', {\r\n            class: {\r\n                editable: props.editable\r\n            },\r\n            attrs: {\r\n                width: `${daysCount * cellSize}`,\r\n                height: `${props.itemcount * cellSize}`\r\n            },\r\n            on: props.editable\r\n            ? {\r\n                mousedown: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (e.button != 0) return\r\n                    const params = calculateParams(e)\r\n                    if (params.item_index == null) return\r\n                    hub.emit('mousedown', params)\r\n                },\r\n                mousemove: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (!isdown) return\r\n                    const params = calculateParams(e)\r\n                    if (e.buttons == 0)\r\n                        hub.emit('mouseup', params)\r\n                    else\r\n                        hub.emit('mousemove', params)\r\n                },\r\n                mouseup: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mouseup', params)\r\n                },\r\n                mouseleave: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (!isdown) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mousemove', params)\r\n                }\r\n            }\r\n            : null\r\n        }, [\r\n\r\n            //Something in the params here is causing the issue\r\n            ...range(0, props.itemcount - 1).map((y) => range(0, daysCount - 1).map((x) => {\r\n                const params = {\r\n                    ...props,\r\n                    x, y, gap, cellSize,\r\n                    icon_x: 10.5 + gap + x * cellSize,\r\n                    icon_y: 17.5 + gap + y * cellSize,\r\n                    day_x: gap + x * cellSize,\r\n                    day_y: gap + y * cellSize,\r\n                    day_offset: x,\r\n                    day_index: x + visibleOffset,\r\n                    item_index: y\r\n                }\r\n                return [\r\n                    scopedSlots.default(params)\r\n                ]\r\n            })).flat()\r\n        ])\r\n    }\r\n})\r\n","// generate a range of integers between two numbers\r\n// inclusive of lo and hi\r\n// e.g. 1, 5 = [1, 2, 3, 4, 5]\r\n// will flip lo and hi if in the wrong order\r\nexport default (lo, hi) => {\r\n    if (lo > hi) [lo, hi] = [hi, lo]\r\n    const res = []\r\n    for (let i = lo; i <= hi; i++) res.push(i)\r\n    return res\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"unselectable\"},[_c('div',{staticClass:\"attention\"},[_c('span',{staticClass:\"info\"},[_vm._v(\"Scheduling resources for \"+_vm._s(_vm.project.name)+\"\\n            \"),_c('span',{staticClass:\"icon\"},[_vm._v(_vm._s(_vm.project.icon))]),_vm._v(\" \"),_c('span',[_vm._v(\"Sch: \"+_vm._s(_vm.project.scheduled)+\" days\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Rem: \"+_vm._s(_vm.project.remaining)+\" days\")])]),_vm._v(\" \"),_c('router-link',{staticClass:\"btn_cancel\",attrs:{\"to\":_vm.projectHref(_vm.project.id)}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn_submit\",on:{\"click\":_vm.schedule}},[_vm._v(\"Schedule\")]),_vm._v(\" \"),_c('logout')],1),_vm._v(\" \"),_c('div',{staticClass:\"sidebyside\"},[_c('table',{staticClass:\"formal\"},[_vm._m(0),_vm._v(\" \"),_c('tbody',_vm._l((_vm.resourceSchedule),function(r){return _c('tr',{staticClass:\"table-row\"},[_c('td',{staticClass:\"d\"},[_c('router-link',{staticClass:\"transparent\",attrs:{\"to\":(\"/resource/\" + (r.resource.id))}},[_vm._v(_vm._s(r.resource.name)+\" \"),_c('span',{staticClass:\"icon\"},[_vm._v(_vm._s(r.resource.icon))])])],1),_vm._v(\" \"),_c('td',{staticClass:\"d\"},[_vm._v(_vm._s(r.scheduled))]),_vm._v(\" \"),_c('td',{staticClass:\"d\"},[_vm._v(_vm._s(r.remaining))])])}),0)]),_vm._v(\" \"),_c('table',{staticClass:\"formal\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"heading\"},[_vm._v(\"Schedule\")]),_vm._v(\" \"),_c('td',{staticClass:\"heading_actions\"},[_c('time-filter'),_vm._v(\" \"),_c('button',{staticClass:\"btn_icon\",on:{\"click\":_vm.backward}},[_vm._v(\"<\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn_icon\",on:{\"click\":_vm.today}},[_vm._v(\"T\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn_icon\",on:{\"click\":_vm.forward}},[_vm._v(\">\")])],1)])]),_vm._v(\" \"),_c('tbody',[_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('timeline',_vm._b({},'timeline',_vm.timelineprops,false)),_vm._v(\" \"),_c('schedule',_vm._b({scopedSlots:_vm._u([{key:\"default\",fn:function(params){return [_c('Cell',_vm._b({},'Cell',params,false))]}}])},'schedule',_vm.scheduleprops,false))],1)])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{staticClass:\"d heading\"},[_vm._v(\"Resources\")]),_vm._v(\" \"),_c('th',{staticClass:\"d\",attrs:{\"title\":\"Scheduled Days\"}},[_vm._v(\"Sch.\")]),_vm._v(\" \"),_c('th',{staticClass:\"d\",attrs:{\"title\":\"Remaining Days Unscheduled\"}},[_vm._v(\"Rem.\")])]),_vm._v(\" \"),_c('tr',{staticClass:\"schedule_actions\"},[_c('td',{attrs:{\"colspan\":\"3\"}})])])}]\n\nexport { render, staticRenderFns }","import component from '../../plumbing/component'\r\nimport pathie from 'pathie'\r\n\r\nexport default component({\r\n    name: 'ProjectScheduleCell',\r\n    render: (h, {state, props, hub, route}) => {\r\n        const noteOverlayPoints = (x, y, gap, cellSize) => `${gap + x * cellSize},${2 + gap + y * cellSize} ${2 + gap + x * cellSize},${gap + y * cellSize} ${10 + gap + x * cellSize},${gap + y * cellSize} ${gap + x * cellSize},${10 + gap + y * cellSize}`\r\n\r\n        const resource = state.resource.resources[props.item_index]\r\n        const { availabilityByResource } = state.availability\r\n        const key = resource ? [props.day_index, resource.id] : null\r\n        const a = key ? pathie.get(availabilityByResource, key) : null\r\n        const change = key ? pathie.get(props.changes, key) : null\r\n\r\n        if(state.project.projects[0] && state.project.projects[0].archived) {\r\n            return []\r\n        }\r\n\r\n        if(resource && resource.archived) {\r\n            return []\r\n        }\r\n\r\n        if (change) {\r\n            if (change == 'remove') return [\r\n                h('text.day.subtraction', {\r\n                    attrs: { x: props.icon_x, y: props.icon_y }\r\n                }, '✕'),\r\n                h('rect.day.subtraction', {\r\n                    attrs: {\r\n                        x: props.day_x,\r\n                        y: props.day_y,\r\n                        rx: 3,\r\n                        ry: 3,\r\n                        width: props.cellSize - 2 * props.gap,\r\n                        height: props.cellSize - 2 * props.gap\r\n                    }\r\n                })\r\n            ]\r\n            else return [\r\n                h('text.day.addition', {\r\n                    attrs: { x: props.icon_x, y: props.icon_y }\r\n                }, '＋'),\r\n                h('rect.day.addition', {\r\n                    attrs: {\r\n                        x: props.day_x,\r\n                        y: props.day_y,\r\n                        rx: 3,\r\n                        ry: 3,\r\n                        width: props.cellSize - 2 * props.gap,\r\n                        height: props.cellSize - 2 * props.gap\r\n                    }\r\n                })\r\n            ]\r\n        }\r\n\r\n        // special case is unavailable\r\n        if (a && a.project_id == null) return [\r\n            a.note\r\n                ? h('polygon.note', { attrs: {\r\n                    points: noteOverlayPoints(props.x, props.y, props.gap, props.cellSize)\r\n                }})\r\n                : null\r\n        ]\r\n\r\n        return [\r\n            a\r\n                ? h('text.day', {\r\n                    attrs: { x: props.icon_x, y: props.icon_y }\r\n                }, state.project.projectsById[a.project_id].icon)\r\n                : null,\r\n            (a && a.note)\r\n                ? h('polygon.note', { attrs: {\r\n                    points: noteOverlayPoints(props.x, props.y, props.gap, props.cellSize)\r\n                }})\r\n                : null,\r\n            h('rect.day', {\r\n                class: {\r\n                    note: (a && a.note != null)\r\n                }, attrs: {\r\n                    x: props.day_x,\r\n                    y: props.day_y,\r\n                    rx: 3,\r\n                    ry: 3,\r\n                    width: props.cellSize - 2 * props.gap,\r\n                    height: props.cellSize - 2 * props.gap\r\n                }\r\n            }, [\r\n                (a && a.note) ? h('title', a.note) : null\r\n            ])\r\n        ]\r\n    }\r\n})\r\n\r\n","<template>\n    <div class=\"unselectable\">\n        <div class=\"attention\">\n            <span class=\"info\">Scheduling resources for {{ project.name }}\n                <span class=\"icon\">{{ project.icon }}</span>\n                <span>Sch: {{project.scheduled}} days</span>\n                <span>Rem: {{project.remaining}} days</span>\n            </span>\n            <router-link :to=\"projectHref(project.id)\" class=\"btn_cancel\">Cancel</router-link>\n            <button @click=\"schedule\" class=\"btn_submit\">Schedule</button>\n            <logout></logout>\n        </div>\n        <div class=\"sidebyside\">\n            <table class=\"formal\">\n                <thead>\n                <tr>\n                    <th class=\"d heading\">Resources</th>\n                    <th class=\"d\" title=\"Scheduled Days\">Sch.</th>\n                    <th class=\"d\" title=\"Remaining Days Unscheduled\">Rem.</th>\n                </tr>\n                <tr class=\"schedule_actions\">\n                    <td colspan=\"3\">\n                    </td>\n                </tr>\n                </thead>\n                <tbody>\n                <tr v-for=\"r in resourceSchedule\" class=\"table-row\">\n                    <td class=\"d\"><router-link :to=\"`/resource/${r.resource.id}`\" class=\"transparent\">{{ r.resource.name }} <span class=\"icon\">{{ r.resource.icon }}</span></router-link></td>\n                    <td class=\"d\">{{ r.scheduled }}</td>\n                    <td class=\"d\">{{ r.remaining }}</td>\n                </tr>\n                </tbody>\n            </table>\n\n            <table class=\"formal\">\n                <thead>\n                <tr>\n                    <th class=\"heading\">Schedule</th>\n                    <td class=\"heading_actions\">\n                        <time-filter></time-filter>\n                        <button @click=\"backward\" class=\"btn_icon\"><</button>\n                        <button @click=\"today\" class=\"btn_icon\">T</button>\n                        <button @click=\"forward\" class=\"btn_icon\">></button>\n                    </td>\n                </tr>\n                </thead>\n                <tbody>\n                <tr>\n                    <td colspan=\"2\">\n                        <timeline v-bind=\"timelineprops\"></timeline>\n                        <schedule v-bind=\"scheduleprops\" v-slot=\"params\">\n                            <Cell v-bind=\"params\"></Cell>\n                        </schedule>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</template>\n\n<script>\n    import spacetime from 'spacetime'\n    import Schedule from './schedule'\n    import Cell from './ProjectScheduleCell'\n    import TimeFilter from \"./TimeFilter\";\n    import Timeline from './Timeline'\n    import pathie from 'pathie'\n    import logout from '../auth/Logout'\n\n    const timezone = 'Pacific/Auckland'\n    const dayOffsetEpoch = spacetime('2019-01-01', timezone)\n    const daysCount = 7*13\n    const changeapi = (availabilityByResource, changes) => {\n        const getcell = (day_index, resource_id) =>\n            pathie.get(availabilityByResource, [day_index, resource_id])\n        const getchange = (day_index, resource_id) =>\n            pathie.get(changes, [day_index, resource_id])\n\n        const getstatus = (day_index, resource_id, current_project_id) => {\n            const change = getchange(day_index, resource_id)\n            if (change != null) return change\n            const existing = getcell(day_index, resource_id)\n            if (existing == null) return 'available'\n            if (existing.project_id == null)\n                return 'unavailable'\n            if (existing.project_id == current_project_id) return 'same'\n            return 'other'\n        }\n\n        const invertstatus = (status) => {\n            if (status == 'same' || status == 'assign') return 'remove'\n            return 'assign'\n        }\n\n        const applychanges = (status, coordinates, project_id, callback) => {\n            let res = changes\n            for (let c of coordinates) {\n                const change = getchange(c.day_index, c.resource_id)\n                const existing = getcell(c.day_index, c.resource_id)\n\n                if(existing && existing.project_id == null) {\n                    continue;\n                }\n\n                if (!change) {\n                    if (status == 'assign') {\n                        if (existing) {\n                            if (existing.project_id  != project_id) {\n                                res = JSON.parse(JSON.stringify(res))\n                                pathie.set(res,\n                                    [c.day_index, c.resource_id],\n                                    'assign')\n                                callback(status);\n                            }\n                        }\n                        else {\n                            res = JSON.parse(JSON.stringify(res))\n                            pathie.set(res,\n                                [c.day_index, c.resource_id],\n                                'assign')\n                            callback(status);\n                        }\n                    }\n                    else {\n                        if (existing && existing.project_id == project_id) {\n                            res = JSON.parse(JSON.stringify(res))\n                            pathie.set(res,\n                                [c.day_index, c.resource_id],\n                                'remove')\n                            callback(status);\n                        }\n                    }\n                }\n                else if (change == 'assign') {\n                    if (status == 'remove') {\n                        res = JSON.parse(JSON.stringify(res))\n                        pathie.del(res,\n                            [c.day_index, c.resource_id])\n                        callback(status);\n                    }\n                }\n                else {\n                    if (status == 'assign') {\n                        res = JSON.parse(JSON.stringify(res))\n                        pathie.del(res,\n                            [c.day_index, c.resource_id])\n                        callback(status);\n                    }\n                }\n            }\n            return res\n        }\n\n        return {\n            getcell,\n            getchange,\n            getstatus,\n            invertstatus,\n            applychanges\n        }\n    }\n\n    export default {\n        components: {\n            Schedule,\n            Timeline,\n            TimeFilter,\n            Cell,\n            logout\n        },\n        data() {\n            return {\n                project: {\n                    id: this.$route.params.id,\n                    name: '',\n                    icon: '',\n                },\n                currenttime: spacetime.today(timezone),\n                days: 31\n            }\n        },\n        mounted() {\n            this.days = this.$store.state.timefilter.days;\n            this.$on('update days', (days) => {\n                this.days = days;\n            })\n        },\n        beforeCreate() {\n            Promise.all([\n                this.$hub.emit('load resources'),\n                this.$hub.emit('load projects')\n            ])\n            .then(() => this.$hub.emit('load availability'))\n            .then(() => {\n                this.project = Object.assign({},\n                    this.projectsById[this.project.id])\n            })\n            .then(() => this.$hub.emit('update'))\n        },\n        computed: {\n            projectsById() {\n                return this.$store.state.project.projectsById\n            },\n            availabilityByResource() {\n                return this.$store.state.availability.availabilityByResource\n            },\n            resources() {\n                return this.$store.state.resource.resources\n            },\n            changes() {\n                return this.$attrs.changes || {}\n            },\n            resourceSchedule() {\n                const result = {}\n                const visibleOffset = dayOffsetEpoch.diff(this.currenttime, 'days')\n                for (const resource of this.resources)\n                    result[resource.id] = {\n                        resource,\n                        remaining: daysCount,\n                        unavailable: 0,\n                        scheduled: 0\n                    }\n                for (const a of pathie.flat(this.availabilityByResource, 2)) {\n                    if (a[0] < visibleOffset) continue\n                    if (a[0] >= visibleOffset + daysCount) continue\n                    result[a[1]].remaining--\n                    if (a[2].project_id)\n                        result[a[1]].scheduled++\n                    else\n                        result[a[1]].unavailable++\n                }\n                return result\n            },\n            timelineprops() {\n                const api = changeapi(this.availabilityByResource, this.changes)\n\n                return {\n                    editable: true,\n                    isdown: this.$attrs.isdown_timeline,\n                    currenttime: this.currenttime,\n                    limit: this.days,\n                    hub: this.$hub.child({\n                        mousedown: (params) => {\n                            const resource_id = this.resources[0].id\n                            const applyingstatus = api.invertstatus(api.getstatus(params.day_index, resource_id),this.project.id)\n                            this.$hub.emit('update', {\n                                isdown_timeline: true,\n                                applyingstatus: applyingstatus,\n                                day_index: params.day_index,\n                                changes: api.applychanges(applyingstatus,\n                                    this.resources.map(r => ({\n                                        day_index: params.day_index,\n                                        resource_id: r.id\n                                    })),\n                                this.project.id,\n                                this.updateProjectScheduledDays)\n                            })\n                        },\n                        mousemove: (params) => {\n                            this.$hub.emit('update', {\n                                day_index: params.day_index,\n                                changes: api.applychanges(this.$attrs.applyingstatus, params.day_indicies.map(d =>\n                                    this.resources.map(r => ({\n                                        day_index: d,\n                                        resource_id: r.id\n                                    }))).flat(),\n                                this.project.id,\n                                this.updateProjectScheduledDays)\n                            })\n                        },\n                        mouseup: (params) => {\n                            this.$hub.emit('update', {\n                                isdown_timeline: false,\n                                applyingstatus: null,\n                                day_index: null\n                            })\n                        }\n                    }),\n                    ...this.$attrs\n                }\n            },\n            scheduleprops() {\n                const api = changeapi(this.availabilityByResource, this.changes)\n\n                return {\n                    editable: true,\n                    isdown: this.$attrs.isdown_schedule,\n                    itemcount: this.resources.length,\n                    currenttime: this.currenttime,\n                    limit: this.days,\n                    hub: this.$hub.child({\n                        mousedown: (params) => {\n                            if (params.item_index == null) return\n                            const resource_id = this.resources[params.item_index].id\n                            const applyingstatus = api.invertstatus(api.getstatus(params.day_index, resource_id, this.project.id))\n                            this.$hub.emit('update', {\n                                isdown_schedule: true,\n                                applyingstatus: applyingstatus,\n                                item_index: params.item_index,\n                                day_index: params.day_index,\n                                changes: api.applychanges(applyingstatus, [{\n                                    day_index: params.day_index,\n                                    resource_id\n                                }],\n                                this.project.id,\n                                this.updateProjectScheduledDays)\n                            })\n                        },\n                        mousemove: (params) => {\n                            if (params.item_index == null) return\n                            const resource_id = this.resources[params.item_index].id\n                            this.$hub.emit('update', {\n                                day_index: params.day_index,\n                                item_index: params.item_index,\n                                changes: api.applychanges(this.$attrs.applyingstatus, params.day_indicies.map(d => ({\n                                    day_index: d,\n                                    resource_id\n                                })),\n                                this.project.id,\n                                this.updateProjectScheduledDays)\n                            })\n                        },\n                        mouseup: (params) => {\n                            this.$hub.emit('update', {\n                                isdown_schedule: false,\n                                applyingstatus: null,\n                                day_index: null,\n                                item_index: null\n                            })\n                        }\n                    }),\n                    ...this.$attrs\n                }\n            }\n        },\n        methods: {\n            updateProjectScheduledDays(action) {\n                if(action === 'assign'){\n                    this.project.scheduled ++;\n                } else {\n                    this.project.scheduled --;\n                }\n                this.project.remaining = this.project.estimate - this.project.scheduled;\n            },\n            getcell(day_index, resource_id) {\n                return pathie.get(this.availabilityByResource, [day_index, resource_id])\n            },\n            projectHref(id) {\n                return `/project/${id}`\n            },\n            backward() {\n                this.currenttime = this.currenttime.subtract(1, 'week')\n            },\n            forward() {\n                this.currenttime = this.currenttime.add(1, 'week')\n            },\n            today() {\n                this.currenttime = spacetime.now()\n            },\n            schedule() {\n                const changes = this.$attrs.changes || {}\n                this.$hub.emit('schedule project', {\n                    project_id: this.project.id,\n                    changes: pathie.flat(changes, 2).map(c => ({\n                        day_index: c[0],\n                        resource_id: c[1],\n                        status: c[2]\n                    }))\n                })\n                .then(() => this.$router.push({ path: '/' }))\n            }\n        }\n    }\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectSchedule.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectSchedule.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProjectSchedule.vue?vue&type=template&id=1aa5a10a&\"\nimport script from \"./ProjectSchedule.vue?vue&type=script&lang=js&\"\nexport * from \"./ProjectSchedule.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn_submit btn_logout\",on:{\"click\":_vm.logout}},[_vm._v(\"Logout\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logout.vue?vue&type=script&lang=js&\"","<template>\r\n    <button @click=\"logout\" class=\"btn_submit btn_logout\">Logout</button>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'logout',\r\n        methods: {\r\n            logout() {\r\n                this.$hub.emit('logout');\r\n            }\r\n        }\r\n    }\r\n</script>\r\n","import { render, staticRenderFns } from \"./Logout.vue?vue&type=template&id=01abc130&\"\nimport script from \"./Logout.vue?vue&type=script&lang=js&\"\nexport * from \"./Logout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import component from '../../plumbing/component'\r\nimport spacetime from 'spacetime'\r\nimport range from '../util/range'\r\nimport 'array-flat-polyfill'\r\n\r\nconst timezone = 'Pacific/Auckland'\r\n// Convert day of week to first letter\r\nconst abbr = ['S', 'M', 'T', 'W', 'T', 'F', 'S']\r\n// how many days to display at once\r\nconst daysCount = 7*13\r\n\r\n// gap around each cell\r\nconst gap = 3\r\n// space above cells for month, day of month and day of week\r\nconst actionsOffset = 73\r\n// width and height of each cell\r\nconst cellSize = 27\r\n// days are stored as an index offset from 2019-01-01\r\n// e.g. 0 is 2019-01-01\r\nconst dayOffsetEpoch = spacetime('2019-01-01', timezone)\r\n\r\nexport default component({\r\n    name: \"Timeline\",\r\n    render: (h, {state, props, hub, route}) => {\r\n        const isdown = props.isdown !== null ? props.isdown : true\r\n\r\n        const current = props.currenttime\r\n        const visibleOffset = dayOffsetEpoch.diff(current, 'days')\r\n        const days = current.subtract(1, 'day')\r\n            .every('day', current.add(props.limit, 'days'))\r\n        const calculateOffset = (offsetX) =>\r\n            Math.min(daysCount - 1,\r\n                Math.max(0,\r\n                    Math.floor(offsetX / cellSize)))\r\n\r\n        const calculateParams = (e) => {\r\n            const day_offset = calculateOffset(e.offsetX)\r\n            const day_index = day_offset + visibleOffset\r\n            const day_indicies = props.day_index != day_index\r\n                ? range(props.day_index, day_index)\r\n                : [day_index]\r\n            return {\r\n                day_offset,\r\n                day_index,\r\n                day_indicies\r\n            }\r\n        }\r\n\r\n        // get all months\r\n        let months = days.filter((d, i) => {\r\n            d.index = i;\r\n            return d.date() == 1;\r\n        });\r\n\r\n        return h('svg.timeline', {\r\n            class: {\r\n                editable: props.editable\r\n            },\r\n            attrs: {\r\n                width: `${daysCount * cellSize}`,\r\n                height: `${actionsOffset}`\r\n            },\r\n            on: props.editable\r\n            ? {\r\n                mousedown: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (e.button != 0) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mousedown', params)\r\n                },\r\n                mousemove: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (!isdown) return\r\n                    const params = calculateParams(e)\r\n                    if (e.buttons == 0)\r\n                        hub.emit('mouseup', params)\r\n                    else\r\n                        hub.emit('mousemove', params)\r\n                },\r\n                mouseup: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mouseup', params)\r\n                },\r\n                mouseleave: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (!isdown) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mousemove', params)\r\n                }\r\n            }\r\n            : null\r\n        }, [\r\n            ...months.map((d) => {\r\n                return h('text.month',\r\n                    {\r\n                        attrs: {\r\n                            x: 10 + d.index * cellSize,\r\n                            y: 24\r\n                        }\r\n                    }, days[d.index].format('{month} {year}')\r\n                )\r\n            }),\r\n            ...days.map((d, x) =>\r\n                h('text.day',\r\n                    {\r\n                        attrs: {\r\n                            x: 13.5 + x * cellSize,\r\n                            y: 43\r\n                        }\r\n                    }, d.date()\r\n                )),\r\n            ...days.map((d, x) =>\r\n                h('text.day',\r\n                    {\r\n                        attrs: {\r\n                            x: 13.5 + x * cellSize,\r\n                            y: 60\r\n                        }\r\n                    }, abbr[d.day()]\r\n                ))\r\n        ])\r\n    }\r\n})\r\n","import Vue from 'vue'\r\nimport hyperscript from 'vue-hyperscript-terse'\r\n\r\n// https://vuejs.org/v2/guide/render-function.html\r\nexport default ({query, name, render}) => Vue.extend({\r\n    name: name,\r\n    functional: true,\r\n    query: query,\r\n    render: (h, ctx) => {\r\n        return render(hyperscript(h), {\r\n            state: ctx.parent.$store.state,\r\n            route: ctx.parent.$route,\r\n            router: ctx.parent.$router,\r\n            hub: ctx.props.hub || ctx.data.hub || ctx.parent.$hub,\r\n            ...ctx\r\n        })\r\n    }\r\n})\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"timeline-filter\"},[_c('h4',[_vm._v(\"Showing \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.days),expression:\"days\"}],attrs:{\"type\":\"number\",\"min\":\"7\",\"max\":\"365\"},domProps:{\"value\":(_vm.days)},on:{\"change\":_vm.emit,\"input\":function($event){if($event.target.composing){ return; }_vm.days=$event.target.value}}}),_vm._v(\" days\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeFilter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeFilter.vue?vue&type=script&lang=js&\"","<template>\r\n    <div class=\"timeline-filter\">\r\n        <h4>Showing <input v-model=\"days\" @change=\"emit\" type=\"number\" min=\"7\" max=\"365\"> days</h4>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                days: -1\r\n            }\r\n        },\r\n        mounted() {\r\n            this.days = this.$store.state.timefilter.days;\r\n\r\n            if(this.days === -1){\r\n                let leftWidth = document.getElementsByClassName('formal')[0].offsetWidth;\r\n                let rightWidth = window.innerWidth - leftWidth;\r\n                this.days = Math.round(rightWidth / (26 + 3));\r\n                this.emit();\r\n            }\r\n        },\r\n        methods: {\r\n            emit() {\r\n                this.$hub.emit('update days', this.days);\r\n                this.$parent.$emit('update days', this.days);\r\n            }\r\n        }\r\n    }\r\n</script>\r\n","import { render, staticRenderFns } from \"./TimeFilter.vue?vue&type=template&id=f3c51ac4&\"\nimport script from \"./TimeFilter.vue?vue&type=script&lang=js&\"\nexport * from \"./TimeFilter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}