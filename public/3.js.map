{"version":3,"sources":["webpack:///./frontend/scheduler/schedule.js","webpack:///./frontend/util/range.js","webpack:///./frontend/scheduler/AvailabilityEditor.vue?e828","webpack:///./frontend/scheduler/AvailabilityEditorCell.js","webpack:///frontend/scheduler/AvailabilityEditor.vue","webpack:///./frontend/scheduler/AvailabilityEditor.vue?3fb8","webpack:///./frontend/scheduler/AvailabilityEditor.vue","webpack:///./frontend/auth/Logout.vue?49b0","webpack:///./frontend/auth/Logout.vue?1956","webpack:///frontend/auth/Logout.vue","webpack:///./frontend/auth/Logout.vue","webpack:///./frontend/scheduler/Timeline.js","webpack:///./plumbing/component.js","webpack:///./frontend/scheduler/TimeFilter.vue?669e","webpack:///./frontend/scheduler/TimeFilter.vue?1138","webpack:///frontend/scheduler/TimeFilter.vue","webpack:///./frontend/scheduler/TimeFilter.vue"],"names":["dayOffsetEpoch","spacetime","component","name","render","h","state","props","hub","scopedSlots","route","isdown","daysCount","limit","current","currenttime","visibleOffset","diff","calculateParams","e","offsetX","offsetY","day_offset","Math","min","max","floor","item_index","itemcount","day_index","day_indicies","range","class","editable","attrs","width","height","on","mousedown","target","currentTarget","button","params","emit","mousemove","buttons","mouseup","mouseleave","map","y","x","gap","cellSize","icon_x","icon_y","day_x","day_y","flat","lo","hi","res","i","push","noteOverlayPoints","resource","resources","availabilityByResource","availability","key","id","a","pathie","get","change","changes","archived","rx","ry","project_id","note","points","project","projectsById","icon","_vm","this","_h","$createElement","_c","_self","staticClass","_v","resourcesHref","update","_m","_l","r","_s","scheduled","remaining","backward","today","forward","_b","timelineProps","_u","fn","scheduleProps","logout","abbr","days","subtract","every","add","months","filter","d","index","date","format","day","query","Vue","extend","functional","ctx","hyperscript","parent","$store","$route","router","$router","data","$hub","directives","rawName","value","expression","domProps","$event","composing"],"mappings":"wzBAKA,IAQMA,EAAiBC,YAAU,aARhB,oBAUFC,gBAAU,CACrBC,KAAM,WACNC,OAAQ,SAACC,EAAD,GAAgD,EAA3CC,MAA2C,IAApCC,EAAoC,EAApCA,MAAOC,EAA6B,EAA7BA,IAAYC,GAAiB,EAAxBC,MAAwB,EAAjBD,aAC7BE,EAA0B,OAAjBJ,EAAMI,QAAkBJ,EAAMI,OACvCC,EAAYL,EAAMM,MAElBC,EAAUP,EAAMQ,YAChBC,EAAgBhB,EAAeiB,KAAKH,EAAS,QAa7CI,EAAkB,SAACC,GAAM,IAXRC,EAASC,EAWD,GAXRD,EAY8BD,EAAEC,QAZvBC,EAYgCF,EAAEE,QAZrB,CACzCC,WACIC,KAAKC,IAAIZ,EAAY,EACjBW,KAAKE,IAAI,EACLF,KAAKG,MAAMN,EAlBlB,MAmBLO,WACIJ,KAAKC,IAAIjB,EAAMqB,UAAY,EACvBL,KAAKE,IAAI,EACLF,KAAKG,MAAOL,EAtBnB,QA0BGC,EADmB,EACnBA,WAAYK,EADO,EACPA,WACdE,EAAYP,EAAaN,EAK/B,MAAO,CACHM,aACAO,YACAF,aACAG,aARiBvB,EAAMoB,YAAcA,GAClCpB,EAAMsB,WAAaA,EACpBE,YAAMxB,EAAMsB,UAAWA,GACvB,CAACA,KASX,OAAOxB,EAAE,eAAgB,CACrB2B,MAAO,CACHC,SAAU1B,EAAM0B,UAEpBC,MAAO,CACHC,MAAO,GAAF,OA7CJ,GA6CSvB,GACVwB,OAAQ,GAAF,OA9CL,GA8CU7B,EAAMqB,YAErBS,GAAI9B,EAAM0B,SACR,CACEK,UAAW,SAACnB,GACR,GAAIA,EAAEoB,SAAWpB,EAAEqB,eACH,GAAZrB,EAAEsB,OAAN,CACA,IAAMC,EAASxB,EAAgBC,GACN,MAArBuB,EAAOf,YACXnB,EAAImC,KAAK,YAAaD,KAE1BE,UAAW,SAACzB,GACR,GAAIA,EAAEoB,SAAWpB,EAAEqB,eACd7B,EAAL,CACA,IAAM+B,EAASxB,EAAgBC,GACd,GAAbA,EAAE0B,QACFrC,EAAImC,KAAK,UAAWD,GAEpBlC,EAAImC,KAAK,YAAaD,KAE9BI,QAAS,SAAC3B,GACN,GAAIA,EAAEoB,SAAWpB,EAAEqB,cAAnB,CACA,IAAME,EAASxB,EAAgBC,GAC/BX,EAAImC,KAAK,UAAWD,KAExBK,WAAY,SAAC5B,GACT,GAAIA,EAAEoB,SAAWpB,EAAEqB,eACd7B,EAAL,CACA,IAAM+B,EAASxB,EAAgBC,GAC/BX,EAAImC,KAAK,YAAaD,MAG5B,MAtCE,EA0CDX,YAAM,EAAGxB,EAAMqB,UAAY,GAAGoB,IAAI,SAACC,GAAD,OAAOlB,YAAM,EAAGnB,EAAY,GAAGoC,IAAI,SAACE,GACrE,IAAMR,E,2UAAS,CAAH,GACLnC,EADK,CAER2C,IAAGD,IAAGE,IAvFd,EAuFmBC,SArFd,GAsFGC,OAAQ,KAtFX,GAsFwBH,EACrBI,OAAQ,KAvFX,GAuFwBL,EACrBM,MA1FR,EAEK,GAwFgBL,EACbM,MA3FR,EAEK,GAyFgBP,EACb3B,WAAY4B,EACZrB,UAAWqB,EAAIlC,EACfW,WAAYsB,IAEhB,MAAO,CACHxC,EAAW,QAASiC,QAExBe,a,kCCvGD,aAACC,EAAIC,GAChB,GAAID,EAAKC,EAAT,OAAwB,CAACA,EAAID,GAAfA,EAAd,KAAkBC,EAAlB,KAEA,IADA,IAAMC,EAAM,GACHC,EAAIH,EAAIG,GAAKF,EAAIE,IAAKD,EAAIE,KAAKD,GACxC,OAAOD,I,yCCRX,I,yDCGe1D,cAAU,CACrBC,KAAM,yBACNC,OAAQ,SAACC,EAAD,GAAmC,IAA9BC,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,MACVwD,GADiC,EAAhBvD,IAAgB,EAAXE,MACF,SAACwC,EAAGD,EAAGE,EAAKC,GAAZ,gBAA4BD,EAAMD,EAAIE,EAAtC,YAAkD,EAAID,EAAMF,EAAIG,EAAhE,YAA4E,EAAID,EAAMD,EAAIE,EAA1F,YAAsGD,EAAMF,EAAIG,EAAhH,YAA4H,GAAKD,EAAMD,EAAIE,EAA3I,YAAuJD,EAAMF,EAAIG,EAAjK,YAA6KD,EAAMD,EAAIE,EAAvL,YAAmM,GAAKD,EAAMF,EAAIG,KAEtOY,EAAW1D,EAAM0D,SAASC,UAAU1D,EAAMoB,YACxCuC,EAA2B5D,EAAM6D,aAAjCD,uBACFE,EAAMJ,EAAW,CAACzD,EAAMsB,UAAWmC,EAASK,IAAM,KAClDC,EAAIF,EAAMG,IAAOC,IAAIN,EAAwBE,GAAO,KACpDK,EAASL,EAAMG,IAAOC,IAAIjE,EAAMmE,QAASN,GAAO,KAEtD,OAAGJ,GAAYA,EAASW,SACb,GAGPF,EACc,eAAVA,EAAgC,CAChCpE,EAAE,uBAAwB,CACtB6B,MAAO,CAAEgB,EAAG3C,EAAM8C,OAAQJ,EAAG1C,EAAM+C,SACpC,KACHjD,EAAE,uBAAwB,CACtB6B,MAAO,CACHgB,EAAG3C,EAAMgD,MACTN,EAAG1C,EAAMiD,MACToB,GAAI,EACJC,GAAI,EACJ1C,MAAO5B,EAAM6C,SAAW,EAAI7C,EAAM4C,IAClCf,OAAQ7B,EAAM6C,SAAW,EAAI7C,EAAM4C,QAInC,CACR9C,EAAE,oBAAqB,CACnB6B,MAAO,CAAEgB,EAAG3C,EAAM8C,OAAQJ,EAAG1C,EAAM+C,SACpC,KACHjD,EAAE,oBAAqB,CACnB6B,MAAO,CACHgB,EAAG3C,EAAMgD,MACTN,EAAG1C,EAAMiD,MACToB,GAAI,EACJC,GAAI,EACJ1C,MAAO5B,EAAM6C,SAAW,EAAI7C,EAAM4C,IAClCf,OAAQ7B,EAAM6C,SAAW,EAAI7C,EAAM4C,QAO/CmB,GAAqB,MAAhBA,EAAEQ,WAA2B,CAClCR,EAAES,KACI1E,EAAE,eAAgB,CAAE6B,MAAO,CACzB8C,OAAQjB,EAAkBxD,EAAM2C,EAAG3C,EAAM0C,EAAG1C,EAAM4C,IAAK5C,EAAM6C,aAE/D,MAGH,CACHkB,EAAIjE,EAAE,WAAY,CACd6B,MAAO,CAAEgB,EAAG3C,EAAM8C,OAAQJ,EAAG1C,EAAM+C,SACpChD,EAAM2E,QAAQC,aAAaZ,EAAEQ,YAAYK,MAC1C,KACDb,GAAKA,EAAES,KAAQ1E,EAAE,eAAgB,CAAE6B,MAAO,CACvC8C,OAAQjB,EAAkBxD,EAAM2C,EAAG3C,EAAM0C,EAAG1C,EAAM4C,IAAK5C,EAAM6C,aAE/D,KACF/C,EAAE,WAAY,CACV2B,MAAO,CACH+C,KAAOT,GAAe,MAAVA,EAAES,MACf7C,MAAO,CACNgB,EAAG3C,EAAMgD,MACTN,EAAG1C,EAAMiD,MACToB,GAAI,EACJC,GAAI,EACJ1C,MAAO5B,EAAM6C,SAAW,EAAI7C,EAAM4C,IAClCf,OAAQ7B,EAAM6C,SAAW,EAAI7C,EAAM4C,MAExC,CACEmB,GAAKA,EAAES,KAAQ1E,EAAE,QAASiE,EAAES,MAAQ,W,qsBCbrD,IACA,2BADA,oBAIA,gBACE,IAAF,gBAAI,OACJ,kBAEA,gBAAI,OACJ,kBA6CE,MAAF,CACI,QAAJ,EACI,UAAJ,EACI,UA9CJ,cACI,IAAJ,SACI,GAAJ,iBACI,IAAJ,SACI,OAAJ,oBACA,iCACA,YAyCI,aAtCJ,YAAI,MACJ,iBACA,YACA,eAoCI,aAlCJ,cACI,IAAJ,IADA,mBAAI,IAEE,IAAN,0DAAQ,IAAR,UACA,+BACA,+BACA,EACA,OACY,EAAZ,8BACY,EAAZ,sCAGA,iBACA,8BACY,EAAZ,8BACY,EAAZ,QACA,4BACA,gBAGA,wCACU,EAAV,8BACU,EAAV,QACA,4BACA,eAvBA,SAAM,GAAN,EAAM,EAAN,UAAM,IAAN,sCAAQ,GAAR,WA0BI,OAAJ,KCvH4M,EDmI5M,CACE,WAAF,CACI,SAAJ,IACI,SAAJ,IACI,WAAJ,IACI,KAAJ,EACI,OAAJ,KAEE,KARF,WASI,MAAJ,CACM,YAAN,UAzEA,oBA0EM,KAAN,KAGE,QAdF,WAcI,IAAJ,OACI,KAAJ,uCACI,KAAJ,8BACM,EAAN,UAGE,aApBF,WAoBI,IAAJ,OACI,QAAJ,KACA,iCACA,kCAEA,gBAAM,OAAN,mCACA,gBAAM,OAAN,yBAEE,SAAF,CACI,uBADJ,WAEM,OAAN,uDAEI,UAJJ,WAKM,OAAN,sCAEI,QAPJ,WAQM,OAAN,yBAEI,iBAVJ,WAWM,IAAN,KACA,kCAFA,mBAAM,IAGE,IAAR,uEAAU,IAAV,UACU,EAAV,OACY,SAAZ,EACY,UAzGZ,GA0GY,YAAZ,EACY,UAAZ,IARA,SAAQ,GAAR,EAAQ,EAAR,UAAQ,IAAR,mBAAY,EAAZ,iBAAU,GAAV,EAAY,MAAZ,GAAM,IAAN,mBAAM,IAUE,IAAR,gGAAU,IAAV,UACA,SACA,QA/GA,KAgHU,EAAV,kBACA,gBACA,oBAEA,yBAjBA,SAAQ,GAAR,EAAQ,EAAR,UAAQ,IAAR,mBAAY,EAAZ,iBAAU,GAAV,EAAY,MAAZ,GAmBM,OAAN,GAEI,cA/BJ,WA+BM,IAAN,OACA,8CAEM,OAAN,GACQ,UAAR,EACQ,OAAR,4BACQ,YAAR,iBACQ,MAAR,UACQ,IAAR,iBACU,UAAV,YACY,IAAZ,oBACA,6CACY,EAAZ,oBACc,iBAAd,EACc,eAAd,EACc,UAAd,YACc,QAAd,iBACA,4BAAgB,MAAhB,CACkB,UAAlB,YACkB,YAAlB,YAKU,UAAV,YACY,EAAZ,oBACc,UAAd,YACc,QAAd,sEAAgB,OAChB,4BAAkB,MAAlB,CACoB,UAApB,EACoB,YAApB,UACA,WAGU,QAAV,YACY,EAAZ,oBACc,iBAAd,EACc,eAAd,KACc,UAAd,WAIA,cAGI,cA5EJ,WA4EM,IAAN,OACA,8CAEM,OAAN,GACQ,UAAR,EACQ,OAAR,4BACQ,UAAR,sBACQ,YAAR,iBACQ,MAAR,UACQ,IAAR,iBACU,UAAV,YACY,GAAZ,mBAAY,CACA,IAAZ,+BACA,6CACY,EAAZ,oBACc,iBAAd,EACc,eAAd,EACc,WAAd,aACc,UAAd,YACc,QAAd,mBACgB,UAAhB,YACgB,YAAhB,SAIU,UAAV,YACY,GAAZ,mBAAY,CACA,IAAZ,+BACY,EAAZ,oBACc,UAAd,YACc,WAAd,aACc,QAAd,sEAAgB,MAAhB,CACkB,UAAlB,EACkB,YAAlB,UAIU,QAAV,YACY,EAAZ,oBACc,iBAAd,EACc,eAAd,KACc,UAAd,KACc,WAAd,WAIA,cAGI,cA7HJ,WA8HM,MAAN,MAGE,QAAF,CACI,OADJ,WACM,IAAN,OACA,0BACM,KAAN,gCACA,8BAAQ,MAAR,CACU,UAAV,KACU,YAAV,KACU,OAAV,SAEA,gBAAQ,OAAR,gBAAU,KAAV,SAEI,SAXJ,WAYM,KAAN,iDAEI,QAdJ,WAeM,KAAN,4CAEI,MAjBJ,WAkBM,KAAN,yB,YE3SI,EAAY,YACd,EJRW,WAAa,IAAIK,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAIO,GAAG,oCAAoCP,EAAIO,GAAG,KAAKH,EAAG,cAAc,CAACE,YAAY,aAAaxD,MAAM,CAAC,GAAKkD,EAAIQ,gBAAgB,CAACR,EAAIO,GAAG,YAAYP,EAAIO,GAAG,KAAKH,EAAG,SAAS,CAACE,YAAY,aAAarD,GAAG,CAAC,MAAQ+C,EAAIS,SAAS,CAACT,EAAIO,GAAG,YAAYP,EAAIO,GAAG,KAAKH,EAAG,WAAW,GAAGJ,EAAIO,GAAG,KAAKH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,QAAQ,CAACE,YAAY,UAAU,CAACN,EAAIU,GAAG,GAAGV,EAAIO,GAAG,KAAKH,EAAG,QAAQJ,EAAIW,GAAIX,EAAoB,iBAAE,SAASY,GAAG,OAAOR,EAAG,KAAK,CAACE,YAAY,aAAa,CAACF,EAAG,KAAK,CAACE,YAAY,KAAK,CAACN,EAAIO,GAAGP,EAAIa,GAAGD,EAAEhC,SAAS7D,MAAM,KAAKqF,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAIO,GAAGP,EAAIa,GAAGD,EAAEhC,SAASmB,WAAWC,EAAIO,GAAG,KAAKH,EAAG,KAAK,CAACE,YAAY,KAAK,CAACN,EAAIO,GAAGP,EAAIa,GAAGD,EAAEE,cAAcd,EAAIO,GAAG,KAAKH,EAAG,KAAK,CAACE,YAAY,KAAK,CAACN,EAAIO,GAAGP,EAAIa,GAAGD,EAAEG,kBAAkB,GAAGf,EAAIO,GAAG,KAAKH,EAAG,WAAWJ,EAAIO,GAAG,KAAKH,EAAG,QAAQ,CAACE,YAAY,UAAU,CAACF,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACE,YAAY,WAAW,CAACN,EAAIO,GAAG,cAAcP,EAAIO,GAAG,KAAKH,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,eAAeJ,EAAIO,GAAG,KAAKH,EAAG,SAAS,CAACE,YAAY,WAAWrD,GAAG,CAAC,MAAQ+C,EAAIgB,WAAW,CAAChB,EAAIO,GAAG,OAAOP,EAAIO,GAAG,KAAKH,EAAG,SAAS,CAACE,YAAY,WAAWrD,GAAG,CAAC,MAAQ+C,EAAIiB,QAAQ,CAACjB,EAAIO,GAAG,OAAOP,EAAIO,GAAG,KAAKH,EAAG,SAAS,CAACE,YAAY,WAAWrD,GAAG,CAAC,MAAQ+C,EAAIkB,UAAU,CAAClB,EAAIO,GAAG,QAAQ,OAAOP,EAAIO,GAAG,KAAKH,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACtD,MAAM,CAAC,QAAU,MAAM,CAACsD,EAAG,WAAWJ,EAAImB,GAAG,GAAG,WAAWnB,EAAIoB,eAAc,IAAQpB,EAAIO,GAAG,KAAKH,EAAG,WAAWJ,EAAImB,GAAG,CAAC9F,YAAY2E,EAAIqB,GAAG,CAAC,CAACrC,IAAI,UAAUsC,GAAG,SAAShE,GAAQ,MAAO,CAAC8C,EAAG,OAAOJ,EAAImB,GAAG,GAAG,OAAO7D,GAAO,UAAc,WAAW0C,EAAIuB,eAAc,KAAS,cACvsD,CAAC,WAAa,IAAiBrB,EAATD,KAAgBE,eAAmBC,EAAnCH,KAA0CI,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACE,YAAY,aAAa,CAArHL,KAA0HM,GAAG,eAA7HN,KAAgJM,GAAG,KAAKH,EAAG,KAAK,CAACE,YAAY,IAAIxD,MAAM,CAAC,MAAQ,mBAAmB,CAAnNmD,KAAwNM,GAAG,UAA3NN,KAAyOM,GAAG,KAAKH,EAAG,KAAK,CAACE,YAAY,IAAIxD,MAAM,CAAC,MAAQ,+BAA+B,CAAxTmD,KAA6TM,GAAG,YAAhUN,KAAgVM,GAAG,KAAKH,EAAG,KAAK,CAACE,YAAY,oBAAoB,CAACF,EAAG,KAAK,CAACtD,MAAM,CAAC,QAAU,cIUtc,EACA,KACA,KACA,MAIa,Y,2CClBf,ICAgM,ECKhM,CACE,KAAF,SACE,QAAF,CACI,OADJ,WAEM,KAAN,uB,YCFIhC,EAAY,YACd,EHRW,WAAa,IAAiBoF,EAATD,KAAgBE,eAAuC,OAAvDF,KAA0CI,MAAMD,IAAIF,GAAa,SAAS,CAACI,YAAY,wBAAwBrD,GAAG,CAAC,MAAnHgD,KAA+HuB,SAAS,CAAxIvB,KAA6IM,GAAG,aAC5J,IGUpB,EACA,KACA,KACA,MAIa,IAAAzF,E,kbCbf,IAEM2G,EAAO,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAYtC7G,EAAiBC,YAAU,aAdhB,oBAgBFC,gBAAU,CACrBC,KAAM,WACNC,OAAQ,SAACC,EAAD,GAAmC,EAA9BC,MAA8B,IAAvBC,EAAuB,EAAvBA,MAAOC,EAAgB,EAAhBA,IACjBG,GADiC,EAAXD,MACI,OAAjBH,EAAMI,QAAkBJ,EAAMI,QAEvCG,EAAUP,EAAMQ,YAChBC,EAAgBhB,EAAeiB,KAAKH,EAAS,QAC7CgG,EAAOhG,EAAQiG,SAAS,EAAG,OAC5BC,MAAM,MAAOlG,EAAQmG,IAAI1G,EAAMM,MAAO,SAMrCK,EAAkB,SAACC,GACrB,IANqBC,EAMfE,GANeF,EAMcD,EAAEC,QALrCG,KAAKC,IAAIZ,GACLW,KAAKE,IAAI,EACLF,KAAKG,MAAMN,EAjBd,OAqBCS,EAAYP,EAAaN,EAI/B,MAAO,CACHM,aACAO,YACAC,aANiBvB,EAAMsB,WAAaA,EAClCE,YAAMxB,EAAMsB,UAAWA,GACvB,CAACA,KASPqF,EAASJ,EAAKK,OAAO,SAACC,EAAGvD,GAEzB,OADAuD,EAAEC,MAAQxD,EACS,GAAZuD,EAAEE,SAGb,OAAOjH,EAAE,eAAgB,CACrB2B,MAAO,CACHC,SAAU1B,EAAM0B,UAEpBC,MAAO,CACHC,MAAO,GAAF,OAAKvB,MACVwB,OAAQ,GAAF,OA9CA,KAgDVC,GAAI9B,EAAM0B,SACR,CACEK,UAAW,SAACnB,GACR,GAAIA,EAAEoB,SAAWpB,EAAEqB,eACH,GAAZrB,EAAEsB,OAAN,CACA,IAAMC,EAASxB,EAAgBC,GAC/BX,EAAImC,KAAK,YAAaD,KAE1BE,UAAW,SAACzB,GACR,GAAIA,EAAEoB,SAAWpB,EAAEqB,eACd7B,EAAL,CACA,IAAM+B,EAASxB,EAAgBC,GACd,GAAbA,EAAE0B,QACFrC,EAAImC,KAAK,UAAWD,GAEpBlC,EAAImC,KAAK,YAAaD,KAE9BI,QAAS,SAAC3B,GACN,GAAIA,EAAEoB,SAAWpB,EAAEqB,cAAnB,CACA,IAAME,EAASxB,EAAgBC,GAC/BX,EAAImC,KAAK,UAAWD,KAExBK,WAAY,SAAC5B,GACT,GAAIA,EAAEoB,SAAWpB,EAAEqB,eACd7B,EAAL,CACA,IAAM+B,EAASxB,EAAgBC,GAC/BX,EAAImC,KAAK,YAAaD,MAG5B,MArCE,YAuCDwE,EAAOlE,IAAI,SAACoE,GACX,OAAO/G,EAAE,aACL,CACI6B,MAAO,CACHgB,EAAG,GAjFd,GAiFmBkE,EAAEC,MACVpE,EAAG,KAER6D,EAAKM,EAAEC,OAAOE,OAAO,sBA9C5B,EAiDDT,EAAK9D,IAAI,SAACoE,EAAGlE,GAAJ,OACR7C,EAAE,WACE,CACI6B,MAAO,CACHgB,EAAG,KA3Fd,GA2FqBA,EACVD,EAAG,KAERmE,EAAEE,WAxDT,EA0DDR,EAAK9D,IAAI,SAACoE,EAAGlE,GAAJ,OACR7C,EAAE,WACE,CACI6B,MAAO,CACHgB,EAAG,KApGd,GAoGqBA,EACVD,EAAG,KAER4D,EAAKO,EAAEI,iB,oaCnHf,oBAAEC,EAAF,EAAEA,MAAOtH,EAAT,EAASA,KAAMC,EAAf,EAAeA,OAAf,OAA2BsH,IAAIC,OAAO,CACjDxH,KAAMA,EACNyH,YAAY,EACZH,MAAOA,EACPrH,OAAQ,SAACC,EAAGwH,GACR,OAAOzH,EAAO0H,IAAYzH,G,2UAAb,EACTC,MAAOuH,EAAIE,OAAOC,OAAO1H,MACzBI,MAAOmH,EAAIE,OAAOE,OAClBC,OAAQL,EAAIE,OAAOI,QACnB3H,IAAKqH,EAAItH,MAAMC,KAAOqH,EAAIO,KAAK5H,KAAOqH,EAAIE,OAAOM,MAC9CR,S,kCCdf,ICAoM,ECOpM,CACE,KADF,WAEI,MAAJ,CACM,MAAN,IAGE,QANF,WASI,GAFA,KAAJ,wCAEA,eACM,IAAN,2DACA,sBACM,KAAN,sBACM,KAAN,SAGE,QAAF,CACI,KADJ,WAEM,KAAN,mCACM,KAAN,0C,YCnBI3H,EAAY,YACd,EHRW,WAAa,IAAIkF,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,KAAK,CAACJ,EAAIO,GAAG,YAAYH,EAAG,QAAQ,CAAC8C,WAAW,CAAC,CAACnI,KAAK,QAAQoI,QAAQ,UAAUC,MAAOpD,EAAQ,KAAEqD,WAAW,SAASvG,MAAM,CAAC,KAAO,SAAS,IAAM,IAAI,IAAM,OAAOwG,SAAS,CAAC,MAAStD,EAAQ,MAAG/C,GAAG,CAAC,OAAS+C,EAAIzC,KAAK,MAAQ,SAASgG,GAAWA,EAAOpG,OAAOqG,YAAqBxD,EAAI0B,KAAK6B,EAAOpG,OAAOiG,WAAUpD,EAAIO,GAAG,cACtb,IGUpB,EACA,KACA,KACA,MAIa,IAAAzF,E","file":"3.js","sourcesContent":["import component from '../../plumbing/component'\r\nimport spacetime from 'spacetime'\r\nimport range from '../util/range'\r\nimport 'array-flat-polyfill'\r\n\r\nconst timezone = 'Pacific/Auckland'\r\n\r\n// gap around each cell\r\nconst gap = 3\r\n// width and height of each cell\r\nconst cellSize = 27\r\n// days are stored as an index offset from 2019-01-01\r\n// e.g. 0 is 2019-01-01\r\nconst dayOffsetEpoch = spacetime('2019-01-01', timezone)\r\n\r\nexport default component({\r\n    name: \"Schedule\",\r\n    render: (h, {state, props, hub, route, scopedSlots}) => {\r\n        const isdown = props.isdown !== null ? props.isdown : true\r\n        const daysCount = props.limit\r\n\r\n        const current = props.currenttime\r\n        const visibleOffset = dayOffsetEpoch.diff(current, 'days')\r\n        // given pixel coordinates map to item day coordinates\r\n        const calculateGrid = (offsetX, offsetY) => ({\r\n            day_offset:\r\n                Math.min(daysCount - 1,\r\n                    Math.max(0,\r\n                        Math.floor(offsetX / cellSize))),\r\n            item_index:\r\n                Math.min(props.itemcount - 1,\r\n                    Math.max(0,\r\n                        Math.floor((offsetY) / cellSize)))\r\n        })\r\n\r\n        const calculateParams = (e) => {\r\n            const { day_offset, item_index } = calculateGrid(e.offsetX, e.offsetY)\r\n            const day_index = day_offset + visibleOffset\r\n            const day_indicies = props.item_index == item_index\r\n                && props.day_index != day_index\r\n                ? range(props.day_index, day_index)\r\n                : [day_index]\r\n            return {\r\n                day_offset,\r\n                day_index,\r\n                item_index,\r\n                day_indicies\r\n            }\r\n        }\r\n\r\n        return h('svg.schedule', {\r\n            class: {\r\n                editable: props.editable\r\n            },\r\n            attrs: {\r\n                width: `${daysCount * cellSize}`,\r\n                height: `${props.itemcount * cellSize}`\r\n            },\r\n            on: props.editable\r\n            ? {\r\n                mousedown: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (e.button != 0) return\r\n                    const params = calculateParams(e)\r\n                    if (params.item_index == null) return\r\n                    hub.emit('mousedown', params)\r\n                },\r\n                mousemove: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (!isdown) return\r\n                    const params = calculateParams(e)\r\n                    if (e.buttons == 0)\r\n                        hub.emit('mouseup', params)\r\n                    else\r\n                        hub.emit('mousemove', params)\r\n                },\r\n                mouseup: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mouseup', params)\r\n                },\r\n                mouseleave: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (!isdown) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mousemove', params)\r\n                }\r\n            }\r\n            : null\r\n        }, [\r\n\r\n            //Something in the params here is causing the issue\r\n            ...range(0, props.itemcount - 1).map((y) => range(0, daysCount - 1).map((x) => {\r\n                const params = {\r\n                    ...props,\r\n                    x, y, gap, cellSize,\r\n                    icon_x: 10.5 + gap + x * cellSize,\r\n                    icon_y: 17.5 + gap + y * cellSize,\r\n                    day_x: gap + x * cellSize,\r\n                    day_y: gap + y * cellSize,\r\n                    day_offset: x,\r\n                    day_index: x + visibleOffset,\r\n                    item_index: y\r\n                }\r\n                return [\r\n                    scopedSlots.default(params)\r\n                ]\r\n            })).flat()\r\n        ])\r\n    }\r\n})\r\n","// generate a range of integers between two numbers\r\n// inclusive of lo and hi\r\n// e.g. 1, 5 = [1, 2, 3, 4, 5]\r\n// will flip lo and hi if in the wrong order\r\nexport default (lo, hi) => {\r\n    if (lo > hi) [lo, hi] = [hi, lo]\r\n    const res = []\r\n    for (let i = lo; i <= hi; i++) res.push(i)\r\n    return res\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"unselectable\"},[_c('div',{staticClass:\"attention\"},[_c('span',{staticClass:\"info\"},[_vm._v(\"Updating resource availability\")]),_vm._v(\" \"),_c('router-link',{staticClass:\"btn_cancel\",attrs:{\"to\":_vm.resourcesHref}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn_submit\",on:{\"click\":_vm.update}},[_vm._v(\"Update\")]),_vm._v(\" \"),_c('logout')],1),_vm._v(\" \"),_c('div',{staticClass:\"sidebyside\"},[_c('table',{staticClass:\"formal\"},[_vm._m(0),_vm._v(\" \"),_c('tbody',_vm._l((_vm.resourceSchedule),function(r){return _c('tr',{staticClass:\"table-row\"},[_c('td',{staticClass:\"d\"},[_vm._v(_vm._s(r.resource.name)+\" \"),_c('span',{staticClass:\"icon\"},[_vm._v(_vm._s(r.resource.icon))])]),_vm._v(\" \"),_c('td',{staticClass:\"d\"},[_vm._v(_vm._s(r.scheduled))]),_vm._v(\" \"),_c('td',{staticClass:\"d\"},[_vm._v(_vm._s(r.remaining))])])}),0),_vm._v(\" \"),_c('tfoot')]),_vm._v(\" \"),_c('table',{staticClass:\"formal\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"heading\"},[_vm._v(\"Schedule\")]),_vm._v(\" \"),_c('td',{staticClass:\"heading_actions\"},[_c('time-filter'),_vm._v(\" \"),_c('button',{staticClass:\"btn_icon\",on:{\"click\":_vm.backward}},[_vm._v(\"<\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn_icon\",on:{\"click\":_vm.today}},[_vm._v(\"T\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn_icon\",on:{\"click\":_vm.forward}},[_vm._v(\">\")])],1)])]),_vm._v(\" \"),_c('tbody',[_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('timeline',_vm._b({},'timeline',_vm.timelineProps,false)),_vm._v(\" \"),_c('schedule',_vm._b({scopedSlots:_vm._u([{key:\"default\",fn:function(params){return [_c('Cell',_vm._b({},'Cell',params,false))]}}])},'schedule',_vm.scheduleProps,false))],1)])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{staticClass:\"d heading\"},[_vm._v(\"Resources\")]),_vm._v(\" \"),_c('th',{staticClass:\"d\",attrs:{\"title\":\"Scheduled Days\"}},[_vm._v(\"Sch.\")]),_vm._v(\" \"),_c('th',{staticClass:\"d\",attrs:{\"title\":\"Remaining Days Unscheduled\"}},[_vm._v(\"Rem.\")])]),_vm._v(\" \"),_c('tr',{staticClass:\"schedule_actions\"},[_c('td',{attrs:{\"colspan\":\"3\"}})])])}]\n\nexport { render, staticRenderFns }","import component from '../../plumbing/component'\r\nimport pathie from 'pathie'\r\n\r\nexport default component({\r\n    name: 'AvailabilityEditorCell',\r\n    render: (h, {state, props, hub, route}) => {\r\n        const noteOverlayPoints = (x, y, gap, cellSize) => `${gap + x * cellSize},${2 + gap + y * cellSize} ${2 + gap + x * cellSize},${gap + y * cellSize} ${10 + gap + x * cellSize},${gap + y * cellSize} ${gap + x * cellSize},${10 + gap + y * cellSize}`\r\n\r\n        const resource = state.resource.resources[props.item_index]\r\n        const { availabilityByResource } = state.availability\r\n        const key = resource ? [props.day_index, resource.id] : null\r\n        const a = key ? pathie.get(availabilityByResource, key) : null\r\n        const change = key ? pathie.get(props.changes, key) : null\r\n\r\n        if(resource && resource.archived) {\r\n            return []\r\n        }\r\n\r\n        if (change) {\r\n            if (change == 'unavailable') return [\r\n                h('text.day.subtraction', {\r\n                    attrs: { x: props.icon_x, y: props.icon_y }\r\n                }, '✕'),\r\n                h('rect.day.subtraction', {\r\n                    attrs: {\r\n                        x: props.day_x,\r\n                        y: props.day_y,\r\n                        rx: 3,\r\n                        ry: 3,\r\n                        width: props.cellSize - 2 * props.gap,\r\n                        height: props.cellSize - 2 * props.gap\r\n                    }\r\n                })\r\n            ]\r\n            else return [\r\n                h('text.day.addition', {\r\n                    attrs: { x: props.icon_x, y: props.icon_y }\r\n                }, '＋'),\r\n                h('rect.day.addition', {\r\n                    attrs: {\r\n                        x: props.day_x,\r\n                        y: props.day_y,\r\n                        rx: 3,\r\n                        ry: 3,\r\n                        width: props.cellSize - 2 * props.gap,\r\n                        height: props.cellSize - 2 * props.gap\r\n                    }\r\n                })\r\n            ]\r\n        }\r\n\r\n        // special case is unavailable\r\n        if (a && a.project_id == null) return [\r\n            a.note\r\n                ? h('polygon.note', { attrs: {\r\n                    points: noteOverlayPoints(props.x, props.y, props.gap, props.cellSize)\r\n                }})\r\n                : null\r\n        ]\r\n\r\n        return [\r\n            a ? h('text.day', {\r\n                attrs: { x: props.icon_x, y: props.icon_y }\r\n            }, state.project.projectsById[a.project_id].icon)\r\n            : null,\r\n            (a && a.note) ? h('polygon.note', { attrs: {\r\n                points: noteOverlayPoints(props.x, props.y, props.gap, props.cellSize)\r\n            }})\r\n            : null,\r\n            h('rect.day', {\r\n                class: {\r\n                    note: (a && a.note != null)\r\n                }, attrs: {\r\n                    x: props.day_x,\r\n                    y: props.day_y,\r\n                    rx: 3,\r\n                    ry: 3,\r\n                    width: props.cellSize - 2 * props.gap,\r\n                    height: props.cellSize - 2 * props.gap\r\n                }\r\n            }, [\r\n                (a && a.note) ? h('title', a.note) : null\r\n            ])\r\n        ]\r\n    }\r\n})\r\n\r\n","<template>\r\n    <div class=\"unselectable\">\r\n        <div class=\"attention\">\r\n            <span class=\"info\">Updating resource availability</span>\r\n            <router-link :to=\"resourcesHref\" class=\"btn_cancel\">Cancel</router-link>\r\n            <button @click=\"update\" class=\"btn_submit\">Update</button>\r\n            <logout></logout>\r\n        </div>\r\n        <div class=\"sidebyside\">\r\n            <table class=\"formal\">\r\n                <thead>\r\n                <tr>\r\n                    <th class=\"d heading\">Resources</th>\r\n                    <th class=\"d\" title=\"Scheduled Days\">Sch.</th>\r\n                    <th class=\"d\" title=\"Remaining Days Unscheduled\">Rem.</th>\r\n                </tr>\r\n                <tr class=\"schedule_actions\">\r\n                    <td colspan=\"3\">\r\n                    </td>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr v-for=\"r in resourceSchedule\" class=\"table-row\">\r\n                    <td class=\"d\">{{ r.resource.name }} <span class=\"icon\">{{ r.resource.icon }}</span></td>\r\n                    <td class=\"d\">{{ r.scheduled }}</td>\r\n                    <td class=\"d\">{{ r.remaining }}</td>\r\n                </tr>\r\n                </tbody>\r\n                <tfoot>\r\n                </tfoot>\r\n            </table>\r\n\r\n            <table class=\"formal\">\r\n                <thead>\r\n                <tr>\r\n                    <th class=\"heading\">Schedule</th>\r\n                    <td class=\"heading_actions\">\r\n                        <time-filter></time-filter>\r\n                        <button @click=\"backward\" class=\"btn_icon\"><</button>\r\n                        <button @click=\"today\" class=\"btn_icon\">T</button>\r\n                        <button @click=\"forward\" class=\"btn_icon\">></button>\r\n                    </td>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr>\r\n                    <td colspan=\"2\">\r\n                        <timeline v-bind=\"timelineProps\"></timeline>\r\n                        <schedule v-bind=\"scheduleProps\" v-slot=\"params\">\r\n                            <Cell v-bind=\"params\"></Cell>\r\n                        </schedule>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import spacetime from 'spacetime'\r\n    import Schedule from './schedule'\r\n    import Cell from './AvailabilityEditorCell'\r\n    import Timeline from './Timeline'\r\n    import TimeFilter from './TimeFilter'\r\n    import pathie from 'pathie'\r\n    import logout from '../auth/Logout'\r\n\r\n    const timezone = 'Pacific/Auckland'\r\n    const dayOffsetEpoch = spacetime('2019-01-01', timezone)\r\n    const daysCount = 7*13\r\n\r\n    const changeapi = (availabilityByResource, changes) => {\r\n        const getcell = (day_index, resource_id) =>\r\n            pathie.get(availabilityByResource, [day_index, resource_id])\r\n\r\n        const getchange = (day_index, resource_id) =>\r\n            pathie.get(changes, [day_index, resource_id])\r\n\r\n        const getstatus = (day_index, resource_id) => {\r\n            const change = getchange(day_index, resource_id)\r\n            if (change != null) return change\r\n            const existing = getcell(day_index, resource_id)\r\n            if (existing == null) return 'available'\r\n            if (existing.project_id == null) return 'unavailable'\r\n            return 'assigned'\r\n        }\r\n\r\n        const invertstatus = (status) =>\r\n            status == 'unavailable'\r\n            ? 'available'\r\n            : 'unavailable'\r\n\r\n        const applychanges = (status, coordinates) => {\r\n            let res = changes\r\n            for (let c of coordinates) {\r\n                const change = getchange(c.day_index, c.resource_id)\r\n                const existing = getcell(c.day_index, c.resource_id)\r\n                if (change) {\r\n                    if (change != status) {\r\n                        res = JSON.parse(JSON.stringify(res))\r\n                        pathie.del(res, [c.day_index, c.resource_id])\r\n                    }\r\n                }\r\n                else if (status == 'unavailable') {\r\n                    if (existing == null || existing.project_id != null) {\r\n                        res = JSON.parse(JSON.stringify(res))\r\n                        pathie.set(res,\r\n                            [c.day_index, c.resource_id],\r\n                            'unavailable')\r\n                    }\r\n                }\r\n                else if (status == 'available' && existing && existing.project_id == null) {\r\n                    res = JSON.parse(JSON.stringify(res))\r\n                    pathie.set(res,\r\n                        [c.day_index, c.resource_id],\r\n                        'available')\r\n                }\r\n            }\r\n            return res\r\n        }\r\n\r\n        return {\r\n            getcell,\r\n            getchange,\r\n            getstatus,\r\n            invertstatus,\r\n            applychanges\r\n        }\r\n    }\r\n\r\n    export default {\r\n        components: {\r\n            Schedule,\r\n            Timeline,\r\n            TimeFilter,\r\n            Cell,\r\n            logout\r\n        },\r\n        data() {\r\n            return {\r\n                currenttime: spacetime.today(timezone),\r\n                days: 31\r\n            }\r\n        },\r\n        mounted() {\r\n            this.days = this.$store.state.timefilter.days;\r\n            this.$on('update days', (days) => {\r\n                this.days = days;\r\n            })\r\n        },\r\n        beforeCreate() {\r\n            Promise.all([\r\n                this.$hub.emit('load resources'),\r\n                this.$hub.emit('load projects')\r\n            ])\r\n            .then(() => this.$hub.emit('load availability'))\r\n            .then(() => this.$hub.emit('update'))\r\n        },\r\n        computed: {\r\n            availabilityByResource() {\r\n                return this.$store.state.availability.availabilityByResource\r\n            },\r\n            resources() {\r\n                return this.$store.state.resource.resources\r\n            },\r\n            changes() {\r\n                return this.$attrs.changes || {}\r\n            },\r\n            resourceSchedule() {\r\n                const result = {}\r\n                const visibleOffset = dayOffsetEpoch.diff(this.currenttime, 'days')\r\n                for (const resource of this.resources)\r\n                    result[resource.id] = {\r\n                        resource,\r\n                        remaining: daysCount,\r\n                        unavailable: 0,\r\n                        scheduled: 0\r\n                    }\r\n                for (const a of pathie.flat(this.availabilityByResource, 2)) {\r\n                    if (a[0] < visibleOffset) continue\r\n                    if (a[0] >= visibleOffset + daysCount) continue\r\n                    result[a[1]].remaining--\r\n                    if (a[2].project_id)\r\n                        result[a[1]].scheduled++\r\n                    else\r\n                        result[a[1]].unavailable++\r\n                }\r\n                return result\r\n            },\r\n            timelineProps() {\r\n                const api = changeapi(this.availabilityByResource, this.changes)\r\n\r\n                return {\r\n                    editable: true,\r\n                    isdown: this.$attrs.isdown_timeline,\r\n                    currenttime: this.currenttime,\r\n                    limit: this.days,\r\n                    hub: this.$hub.child({\r\n                        mousedown: (params) => {\r\n                            const resource_id = this.resources[0].id\r\n                            const applyingstatus = api.invertstatus(api.getstatus(params.day_index, resource_id))\r\n                            this.$hub.emit('update', {\r\n                                isdown_timeline: true,\r\n                                applyingstatus: applyingstatus,\r\n                                day_index: params.day_index,\r\n                                changes: api.applychanges(applyingstatus,\r\n                                    this.resources.map(r => ({\r\n                                        day_index: params.day_index,\r\n                                        resource_id: r.id\r\n                                    }))\r\n                                )\r\n                            })\r\n                        },\r\n                        mousemove: (params) => {\r\n                            this.$hub.emit('update', {\r\n                                day_index: params.day_index,\r\n                                changes: api.applychanges(this.$attrs.applyingstatus, params.day_indicies.map(d =>\r\n                                    this.resources.map(r => ({\r\n                                        day_index: d,\r\n                                        resource_id: r.id\r\n                                    }))).flat())\r\n                            })\r\n                        },\r\n                        mouseup: (params) => {\r\n                            this.$hub.emit('update', {\r\n                                isdown_timeline: false,\r\n                                applyingstatus: null,\r\n                                day_index: null\r\n                            })\r\n                        }\r\n                    }),\r\n                    ...this.$attrs\r\n                }\r\n            },\r\n            scheduleProps() {\r\n                const api = changeapi(this.availabilityByResource, this.changes)\r\n\r\n                return {\r\n                    editable: true,\r\n                    isdown: this.$attrs.isdown_schedule,\r\n                    itemcount: this.resources.length,\r\n                    currenttime: this.currenttime,\r\n                    limit: this.days,\r\n                    hub: this.$hub.child({\r\n                        mousedown: (params) => {\r\n                            if (params.item_index == null) return\r\n                            const resource_id = this.resources[params.item_index].id\r\n                            const applyingstatus = api.invertstatus(api.getstatus(params.day_index, resource_id))\r\n                            this.$hub.emit('update', {\r\n                                isdown_schedule: true,\r\n                                applyingstatus: applyingstatus,\r\n                                item_index: params.item_index,\r\n                                day_index: params.day_index,\r\n                                changes: api.applychanges(applyingstatus, [{\r\n                                    day_index: params.day_index,\r\n                                    resource_id\r\n                                }])\r\n                            })\r\n                        },\r\n                        mousemove: (params) => {\r\n                            if (params.item_index == null) return\r\n                            const resource_id = this.resources[params.item_index].id\r\n                            this.$hub.emit('update', {\r\n                                day_index: params.day_index,\r\n                                item_index: params.item_index,\r\n                                changes: api.applychanges(this.$attrs.applyingstatus, params.day_indicies.map(d => ({\r\n                                    day_index: d,\r\n                                    resource_id\r\n                                })))\r\n                            })\r\n                        },\r\n                        mouseup: (params) => {\r\n                            this.$hub.emit('update', {\r\n                                isdown_schedule: false,\r\n                                applyingstatus: null,\r\n                                day_index: null,\r\n                                item_index: null\r\n                            })\r\n                        }\r\n                    }),\r\n                    ...this.$attrs\r\n                }\r\n            },\r\n            resourcesHref() {\r\n                return '/'\r\n            }\r\n        },\r\n        methods: {\r\n            update() {\r\n                const changes = this.$attrs.changes || {}\r\n                this.$hub.emit('update availability',\r\n                    pathie.flat(changes, 2).map(c => ({\r\n                        day_index: c[0],\r\n                        resource_id: c[1],\r\n                        status: c[2]\r\n                    })))\r\n                .then(() => this.$router.push({ path: '/' }))\r\n            },\r\n            backward() {\r\n                this.currenttime = this.currenttime.subtract(1, 'week')\r\n            },\r\n            forward() {\r\n                this.currenttime = this.currenttime.add(1, 'week')\r\n            },\r\n            today() {\r\n                this.currenttime = spacetime.now()\r\n            }\r\n        }\r\n    }\r\n</script>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AvailabilityEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AvailabilityEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AvailabilityEditor.vue?vue&type=template&id=5eabc636&\"\nimport script from \"./AvailabilityEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./AvailabilityEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn_submit btn_logout\",on:{\"click\":_vm.logout}},[_vm._v(\"Logout\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logout.vue?vue&type=script&lang=js&\"","<template>\r\n    <button @click=\"logout\" class=\"btn_submit btn_logout\">Logout</button>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'logout',\r\n        methods: {\r\n            logout() {\r\n                this.$hub.emit('logout');\r\n            }\r\n        }\r\n    }\r\n</script>\r\n","import { render, staticRenderFns } from \"./Logout.vue?vue&type=template&id=01abc130&\"\nimport script from \"./Logout.vue?vue&type=script&lang=js&\"\nexport * from \"./Logout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import component from '../../plumbing/component'\r\nimport spacetime from 'spacetime'\r\nimport range from '../util/range'\r\nimport 'array-flat-polyfill'\r\n\r\nconst timezone = 'Pacific/Auckland'\r\n// Convert day of week to first letter\r\nconst abbr = ['S', 'M', 'T', 'W', 'T', 'F', 'S']\r\n// how many days to display at once\r\nconst daysCount = 7*13\r\n\r\n// gap around each cell\r\nconst gap = 3\r\n// space above cells for month, day of month and day of week\r\nconst actionsOffset = 73\r\n// width and height of each cell\r\nconst cellSize = 27\r\n// days are stored as an index offset from 2019-01-01\r\n// e.g. 0 is 2019-01-01\r\nconst dayOffsetEpoch = spacetime('2019-01-01', timezone)\r\n\r\nexport default component({\r\n    name: \"Timeline\",\r\n    render: (h, {state, props, hub, route}) => {\r\n        const isdown = props.isdown !== null ? props.isdown : true\r\n\r\n        const current = props.currenttime\r\n        const visibleOffset = dayOffsetEpoch.diff(current, 'days')\r\n        const days = current.subtract(1, 'day')\r\n            .every('day', current.add(props.limit, 'days'))\r\n        const calculateOffset = (offsetX) =>\r\n            Math.min(daysCount - 1,\r\n                Math.max(0,\r\n                    Math.floor(offsetX / cellSize)))\r\n\r\n        const calculateParams = (e) => {\r\n            const day_offset = calculateOffset(e.offsetX)\r\n            const day_index = day_offset + visibleOffset\r\n            const day_indicies = props.day_index != day_index\r\n                ? range(props.day_index, day_index)\r\n                : [day_index]\r\n            return {\r\n                day_offset,\r\n                day_index,\r\n                day_indicies\r\n            }\r\n        }\r\n\r\n        // get all months\r\n        let months = days.filter((d, i) => {\r\n            d.index = i;\r\n            return d.date() == 1;\r\n        });\r\n\r\n        return h('svg.timeline', {\r\n            class: {\r\n                editable: props.editable\r\n            },\r\n            attrs: {\r\n                width: `${daysCount * cellSize}`,\r\n                height: `${actionsOffset}`\r\n            },\r\n            on: props.editable\r\n            ? {\r\n                mousedown: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (e.button != 0) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mousedown', params)\r\n                },\r\n                mousemove: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (!isdown) return\r\n                    const params = calculateParams(e)\r\n                    if (e.buttons == 0)\r\n                        hub.emit('mouseup', params)\r\n                    else\r\n                        hub.emit('mousemove', params)\r\n                },\r\n                mouseup: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mouseup', params)\r\n                },\r\n                mouseleave: (e) => {\r\n                    if (e.target !== e.currentTarget) return\r\n                    if (!isdown) return\r\n                    const params = calculateParams(e)\r\n                    hub.emit('mousemove', params)\r\n                }\r\n            }\r\n            : null\r\n        }, [\r\n            ...months.map((d) => {\r\n                return h('text.month',\r\n                    {\r\n                        attrs: {\r\n                            x: 10 + d.index * cellSize,\r\n                            y: 24\r\n                        }\r\n                    }, days[d.index].format('{month} {year}')\r\n                )\r\n            }),\r\n            ...days.map((d, x) =>\r\n                h('text.day',\r\n                    {\r\n                        attrs: {\r\n                            x: 13.5 + x * cellSize,\r\n                            y: 43\r\n                        }\r\n                    }, d.date()\r\n                )),\r\n            ...days.map((d, x) =>\r\n                h('text.day',\r\n                    {\r\n                        attrs: {\r\n                            x: 13.5 + x * cellSize,\r\n                            y: 60\r\n                        }\r\n                    }, abbr[d.day()]\r\n                ))\r\n        ])\r\n    }\r\n})\r\n","import Vue from 'vue'\r\nimport hyperscript from 'vue-hyperscript-terse'\r\n\r\n// https://vuejs.org/v2/guide/render-function.html\r\nexport default ({query, name, render}) => Vue.extend({\r\n    name: name,\r\n    functional: true,\r\n    query: query,\r\n    render: (h, ctx) => {\r\n        return render(hyperscript(h), {\r\n            state: ctx.parent.$store.state,\r\n            route: ctx.parent.$route,\r\n            router: ctx.parent.$router,\r\n            hub: ctx.props.hub || ctx.data.hub || ctx.parent.$hub,\r\n            ...ctx\r\n        })\r\n    }\r\n})\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"timeline-filter\"},[_c('h4',[_vm._v(\"Showing \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.days),expression:\"days\"}],attrs:{\"type\":\"number\",\"min\":\"7\",\"max\":\"365\"},domProps:{\"value\":(_vm.days)},on:{\"change\":_vm.emit,\"input\":function($event){if($event.target.composing){ return; }_vm.days=$event.target.value}}}),_vm._v(\" days\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeFilter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeFilter.vue?vue&type=script&lang=js&\"","<template>\r\n    <div class=\"timeline-filter\">\r\n        <h4>Showing <input v-model=\"days\" @change=\"emit\" type=\"number\" min=\"7\" max=\"365\"> days</h4>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                days: -1\r\n            }\r\n        },\r\n        mounted() {\r\n            this.days = this.$store.state.timefilter.days;\r\n\r\n            if(this.days === -1){\r\n                let leftWidth = document.getElementsByClassName('formal')[0].offsetWidth;\r\n                let rightWidth = window.innerWidth - leftWidth;\r\n                this.days = Math.round(rightWidth / (26 + 3));\r\n                this.emit();\r\n            }\r\n        },\r\n        methods: {\r\n            emit() {\r\n                this.$hub.emit('update days', this.days);\r\n                this.$parent.$emit('update days', this.days);\r\n            }\r\n        }\r\n    }\r\n</script>\r\n","import { render, staticRenderFns } from \"./TimeFilter.vue?vue&type=template&id=f3c51ac4&\"\nimport script from \"./TimeFilter.vue?vue&type=script&lang=js&\"\nexport * from \"./TimeFilter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}